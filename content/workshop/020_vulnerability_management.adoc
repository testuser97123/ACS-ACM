The container running in a Kubernetes cluster are all running instance of container images. Each image will contain third party components with known vulnerability (CVEs). Vulnerability management, then is the process of identifying vulnerabilities in compoenents used in container images, understanding the impact of these vulnerabilities, and mitigating that impact. 

== Vulnerability Management implementation

First, {rhacs} implements a vulnerability scanner to decompose image, identify the components (whether installed byt the package manager in the base OS layer or added Python, Java, Ruby, or NodeJS packages ...), and enumerate vulnerabilities in these packages. In the case of {cust} that already use an image vulnerability scanner (XRAY with Artifactory), their findings are shown into {rhacs}. 

Second, the {rhacs} Kubernetes Security Platform can automatically enforce policies on what images can be used to launch containers and can also identify security issues, including vulnerabilities and problematics package, in image layers separate from the underlying base operating system (OS) image. It provides visibility and analysis by enumerating these contents of images. {rhacs}'s policy engine provides out-of-the-box policies (such as alerting on vulnerabilities with a CVSS score >= 7 where a fix is available) and can be used to define more specific policies to reflect an organization's risk tolerance and guidelines. These policies can be applied to both the Build and Deploy lifecycles stages.

Finally, {rhacs} provides rich analytics at both build and deployment level, 
giving all stackholders a viez of which deployments are particularly risky (combining the discovered vulnerabilities with other sources of data such as how the deployments is exposed outside the cluster, whether the deployment is also configured in problematic ways, and whether the deployment is experiencing anomalous runtime behavior) and a view of vulnerability management accorss all protected deployment.

== Review Vulnerability Management Dashboard

The Vulnerabilty Management Dashboard is accessible from the RHACS portal in ```Vulnerability Management``` -> ```Dashboard```

image::workshop/Vulnerability-Management-dashboard.png[pdfwidth=95%]

Buttons along the top of the dashboard link to the policies, CVEs, nodes, and images. The Application & Infrastructure button displays a list that gives reports by cluster, namesapce, deployment and component. A filter CVES buttons also provides reports for only fixable CVEs or all CVEs.

The {rhacs} vulnerability management dashboard offers different ways to tackle vulnerabilities by looking
at the:

. most critical CVEs (by Impact)
. most critical components
. identify vulnerabilities by image layer
. filter to display only fixable (or all) CVEs
. base OS of the image


NOTE: CVE stands for Common Vulnerabilities and Exposures, and is managed by the link:https://www.cve.org/[CVE Program website].


On the dashboard image are listed in order of risk, based
on the number and severity of the vulnerabilities present in the components in the images. 

As presented during the demonstration an overview of the vulnerability present on the images is provides by {rhacs}. Here is the exemple of the overview provide for an images with the images summary section (providing relevant information about the analyzed image), the dockerfile section that reveal details of the image's dockerfile and the image finding section with all CVEs information.

image::workshop/image_overview.png[pdfwidth=95%]

On this last section you can manage risk acceptance. In the case of a fix that can be defferal or a false postivice you can accepth the risk by acknoledging the vulnerability and deffing resolution to a later time. A deferal and a requesting approval can be created with the pollowing processes : 

. Click the Image Findings tab.
. Locate a fixable CVE in the list and click the options menu icon "options_menu_icon" in the right column and select Defer CVE to open the Mark CVEs for deferral dialog box.
. Select the delay of defferal and click Request Approval. The CVE updates with a blue information icon next to the CVE name.
. Click the blue information icon to the right of the CVE and copy the approval link to share with your organizationâ€™s deferral approver.

The risk acceptance is then managed by the person responsible of the security in ``` Vulnerability Management``` -> ```Risk Acceptance``` section. The approver can then review the vulnerability's comments, scope, and action to decide if he want to approve it. He can also click through to the deployment that has that vulnerability and see its Risk Priority.

==  Reporting vulnerabilties

[rhacs] can be use to schedule reporting through email. For sending this comminucation you can follow this procedure : 

. From the {rhacs} portal, navigate to ```Vulnerability management``` --> ```Reporting```

. Click Create report.
. Enter a name for your report in the Report name field.
. Select the cadence for your report under.
. Enter a description for the report.
. On the next line, there is a series of dropdown boxes to select which vulnerabilities to report. There are options to report fixable vulnerabilities, vulnerabilities of a specific severity, or only vulnerabilities that have appeared since the last scheduled report. 
. Under Configure resource scope, click Create resource scope and create one for the namespace of your choice, and under Allowed resources use the switch to under Manual selection to select your cluster.
. Click Save, which returns you to the Create a vulnerability report page.
. Select or create an email notifier to send your report by email and configure your distribution list under Notification and distribution.
. Click Save










